---
title: "Final Report"
subtitle: "due November 16, 2021 by 11:59 PM "
author: "The Gre8est Team: Roni Ochakovski, Matthew Wang, Judy Zhong"
date: "11/16/2021"
output: pdf_document
---

```{r load-packages, message = FALSE, warning = FALSE, echo = FALSE}
library(tidyverse) 
library(tidymodels)
library(infer)
library(ggplot2)
library(sf)
#install.packages("rnaturalearth")
library(rnaturalearth)
#install.packages("rnaturalearthdata")
library(rnaturalearthdata)
library(rgeos)
library(scales)
``` 

```{r load-data, message = FALSE, warning = FALSE, echo=FALSE}
library(readr)
h_spend <- read_csv("../data/Health-Spending.CSV")
wb_tot_lifeexp <- read_csv("../data/World Bank Life Exp.csv")
wb_f_lifeexp <- read_csv("../data/World Bank Female Life Exp.csv")
wb_m_lifeexp <- read_csv("../data/World Bank Male Life Exp.csv")
# econ <- read_csv("../data/EconMetrics.csv")
# econ <- select(econ, -4)
misc_data <- read_csv("../data/World Bank Data.csv")
misc_data <- select(misc_data, -4)
```

```{r combine-lifeexp-data, warning = FALSE, echo=FALSE}
wb_tot_lifeexp_long <- pivot_longer(wb_tot_lifeexp, cols = "1990":"2020", names_to = "Year", values_to = "Total Life Expectancy")

wb_f_lifeexp_long <- wb_f_lifeexp %>%
  select(c(1:2,34:64)) %>%
  pivot_longer(cols = "1990":"2020", names_to = "Year", values_to = "Female Life Expectancy")

wb_m_lifeexp_long <- wb_m_lifeexp %>%
  select(c(1:2,34:64)) %>%
  pivot_longer(cols = "1990":"2020", names_to = "Year", values_to = "Male Life Expectancy")

lifeexp <- left_join(wb_tot_lifeexp_long, wb_f_lifeexp_long, by = c("Country Name", "Country Code", "Year"))

lifeexp <- left_join(lifeexp, wb_m_lifeexp_long, by = c("Country Name", "Country Code", "Year"))
```

```{r edit_misc_data, warning = FALSE, echo = FALSE}
yrs <- c(2011:2020)

colnames(misc_data) <- c("Country Name", "Country Code", "Series Name", yrs)
misc_temp <- misc_data %>%
  pivot_longer(cols = 4:13, names_to = "Year", values_to = "Value")
misc_temp2 <- misc_temp %>%
  group_by("Country Name") %>%
  pivot_wider(names_from = "Series Name", values_from = "Value") %>%
  ungroup()
misc_temp3 <- select(misc_temp2, -4, -18)
misc_data2 <- misc_temp3[-c(2171:2610),]
j <- c(4:16)
misc_data2[j] <- lapply(misc_data2[j], unlist)
misc_data2[j] <- lapply(misc_data2[j], as.numeric)
```

```{r edit_h_spend, warning = FALSE, echo=FALSE}
h_spend2 <- select(h_spend, -1, -4)
colnames(h_spend2)[1:3] <- c("Country Name", "Country Code", "Year")
```

```{r combine_data, warning = FALSE, echo=FALSE}
full_data <- full_join(lifeexp, misc_data2, by = c("Country Name", "Country Code", "Year"))
full_data$Year = as.double(full_data$Year)
full_data <- full_join(full_data, h_spend2, by = c("Country Name", "Country Code", "Year"))
```

# Background

# Research Question

# Data Overview

# Descriptive Stats

# Modelling


